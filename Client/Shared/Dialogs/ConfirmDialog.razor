<MudDialog>
    <DialogContent>
        <MudStack Spacing="3">
            <MudStack Row AlignItems="MudAlignItems.Center" Spacing="2">
                <MudIcon Icon="@GetIcon()" Color="@Color" Size="Size.Large" />
                <MudText Typo="Typo.h6">@Title</MudText>
            </MudStack>
            
            <MudText Typo="Typo.body1">@ContentText</MudText>
            
            @if (!string.IsNullOrEmpty(SubText))
            {
                <MudAlert Severity="@GetSeverity()" Dense="true">
                    @SubText
                </MudAlert>
            }
        </MudStack>
    </DialogContent>
    
    <DialogActions>
        <MudButton OnClick="Cancel" Color="MudColor.Secondary">
            Anuleaza
        </MudButton>
        <MudButton OnClick="Confirm" 
                  Color="@Color" 
                  Variant="MudVariant.Filled"
                  StartIcon="@GetIcon()">
            @ButtonText
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    public IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter] 
    public string Title { get; set; } = "Confirmare";

    [Parameter] 
    public string ContentText { get; set; } = string.Empty;

    [Parameter] 
    public string? SubText { get; set; }

    [Parameter] 
    public string ButtonText { get; set; } = "Confirma";

    [Parameter] 
    public MudColor Color { get; set; } = MudColor.Primary;

    private void Confirm() => MudDialog.Close(DialogResult.Ok(true));
    private void Cancel() => MudDialog.Cancel();

    private string GetIcon() => Color switch
    {
        MudColor.Error => Icons.Material.Filled.DeleteForever,
        MudColor.Warning => Icons.Material.Filled.Warning,
        MudColor.Info => Icons.Material.Filled.Info,
        MudColor.Success => Icons.Material.Filled.CheckCircle,
        _ => Icons.Material.Filled.HelpOutline
    };

    private MudBlazor.Severity GetSeverity() => Color switch
    {
        MudColor.Error => MudBlazor.Severity.Error,
        MudColor.Warning => MudBlazor.Severity.Warning,  
        MudColor.Info => MudBlazor.Severity.Info,
        MudColor.Success => MudBlazor.Severity.Success,
        _ => MudBlazor.Severity.Normal
    };
}
